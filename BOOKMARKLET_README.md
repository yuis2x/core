# URL Note Taker - ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç‰ˆ

URL Note Takerã®ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç‰ˆã§ã™ã€‚ã©ã‚“ãªãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ç„¡ã—ã§ä½¿ç”¨ã§ãã¾ã™ã€‚

## ä½¿ç”¨æ–¹æ³•

### 1. ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ç™»éŒ²

1. ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼:
   ```
   javascript:(function(){'use strict';if(window.URLNoteTakerBookmarklet){if(window.URLNoteTakerBookmarklet.toggle){window.URLNoteTakerBookmarklet.toggle();}return;}const CONFIG={DEBOUNCE:1000,PREFIX:'notes_',SHORTCUT:{key:'KeyN',modifiers:['shiftKey']},MAX_TITLE_LENGTH:50,MAX_PREVIEW_LENGTH:100,AUTO_SAVE_DELAY:2000};const URL_RULES=[[/google\.[a-z.]+\/search/,true],[/youtube\.com\/(watch|results)/,true],[/amazon\.[a-z.]+\/.*\/dp\//,true],[/wikipedia\.org\/wiki\//,false],[/github\.com\/[^\/]+\/[^\/]+\/?$/,false]];const loadDependencies=()=>{return new Promise((resolve,reject)=>{const dependencies=['https://unpkg.com/preact@10.19.3/dist/preact.umd.js','https://unpkg.com/preact@10.19.3/hooks/dist/hooks.umd.js','https://unpkg.com/htm@3.1.1/dist/htm.js','https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js','https://cdn.jsdelivr.net/npm/dayjs@1.11.7/dayjs.min.js'];let loadedCount=0;const totalCount=dependencies.length;dependencies.forEach((url,index)=>{const script=document.createElement('script');script.src=url;script.onload=()=>{loadedCount++;if(loadedCount===totalCount){resolve();}};script.onerror=()=>reject(new Error(`Failed to load: ${url}`));document.head.appendChild(script);});});};const storage={key:(url)=>CONFIG.PREFIX+utils.normalizeURL(url),getAllNotes:()=>{try{const allNotes=[];for(let i=0;i<localStorage.length;i++){const key=localStorage.key(i);if(key&&key.startsWith(CONFIG.PREFIX)){try{const data=JSON.parse(localStorage.getItem(key)||'{}');if(data.notes&&data.notes.length>0){allNotes.push({url:data.url,domain:utils.getDomain(data.url),notes:data.notes,updated:data.updated});}}catch(error){console.error('Failed to parse note data:',error);}}}return allNotes.sort((a,b)=>b.updated-a.updated);}catch(error){console.error('Failed to get all notes:',error);return[];}},getNotesByDomain:(domain)=>{const allNotes=storage.getAllNotes();return allNotes.filter(noteData=>noteData.domain===domain);},save:(url,noteId,content)=>{try{const notes=storage.load(url);const existing=notes.findIndex(n=>n.id===noteId);const now=Date.now();const note={id:noteId,content:content.trim(),title:utils.extractTitle(content),updated:now,created:existing>=0?notes[existing].created:now};if(existing>=0){notes[existing]=note;}else{notes.push(note);}const data={url:utils.normalizeURL(url),notes,updated:now};localStorage.setItem(storage.key(url),JSON.stringify(data));return note;}catch(error){console.error('Failed to save note:',error);return null;}},load:(url)=>{try{const data=localStorage.getItem(storage.key(url))||'{}';const parsed=JSON.parse(data);return parsed.notes||[];}catch(error){console.error('Failed to load notes:',error);return[];}},delete:(url,noteId)=>{try{const notes=storage.load(url).filter(n=>n.id!==noteId);if(notes.length>0){const data={url:utils.normalizeURL(url),notes,updated:Date.now()};localStorage.setItem(storage.key(url),JSON.stringify(data));}else{localStorage.removeItem(storage.key(url));}return true;}catch(error){console.error('Failed to delete note:',error);return false;}},getStats:(url)=>{const notes=storage.load(url);return{count:notes.length,totalSize:notes.reduce((sum,note)=>sum+note.content.length,0),lastUpdated:Math.max(...notes.map(n=>n.updated),0)};}};const utils={normalizeURL:(url)=>{try{const parsed=new URL(url);const includeQuery=URL_RULES.find(([pattern])=>pattern.test(url))?.[1]??false;return includeQuery?`${parsed.origin}${parsed.pathname}?${new URLSearchParams([...new URLSearchParams(parsed.search).entries()].sort()).toString()}`:`${parsed.origin}${parsed.pathname}`;}catch{return url;}},formatDate:(date)=>{if(typeof dayjs!=='undefined'){return dayjs(date).format('MM/DD HH:mm');}return new Date(date).toLocaleString('ja-JP',{month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'});},generateId:()=>Date.now().toString(36)+Math.random().toString(36).substr(2),extractTitle:(content)=>{const lines=content.split('\n').filter(line=>line.trim());const firstLine=lines[0]?.trim()||'';return firstLine.substring(0,CONFIG.MAX_TITLE_LENGTH)||'Untitled';},debounce:(func,delay)=>{if(typeof _!=='undefined'&&_.debounce){return _.debounce(func,delay);}let timeoutId;return function(...args){clearTimeout(timeoutId);timeoutId=setTimeout(()=>func.apply(this,args),delay);};},escapeHtml:(text)=>{const div=document.createElement('div');div.textContent=text;return div.innerHTML;},generatePreview:(content)=>{return content.replace(/\n/g,' ').substring(0,CONFIG.MAX_PREVIEW_LENGTH);},getDomain:(url)=>{try{return new URL(url).hostname;}catch{return'unknown';}},orderBy:(array,keys,orders)=>{if(typeof _!=='undefined'&&_.orderBy){return _.orderBy(array,keys,orders);}return array.sort((a,b)=>{for(let i=0;i<keys.length;i++){const key=keys[i];const order=orders[i]==='desc'?-1:1;if(a[key]<b[key])return-1*order;if(a[key]>b[key])return 1*order;}return 0;});},maxBy:(array,key)=>{if(typeof _!=='undefined'&&_.maxBy){return _.maxBy(array,key);}return array.reduce((max,item)=>item[key]>max[key]?item:max,array[0]);}};const initApp=()=>{const{h,render}=preact;const{useState,useEffect,useCallback,useMemo,useRef}=preactHooks;const html=htm.bind(h);const NoteApp=()=>{const[notes,setNotes]=useState([]);const[currentId,setCurrentId]=useState(null);const[isMinimized,setIsMinimized]=useState(true);const[content,setContent]=useState('');const[isVisible,setIsVisible]=useState(true);const[isSaving,setIsSaving]=useState(false);const[lastSaved,setLastSaved]=useState(null);const[viewMode,setViewMode]=useState('url');const[allNotes,setAllNotes]=useState([]);const[currentDomain,setCurrentDomain]=useState('');const textareaRef=useRef(null);const debouncedSave=useMemo(()=>utils.debounce(async(id,text)=>{if(id&&text.trim()){setIsSaving(true);try{const savedNote=storage.save(location.href,id,text);if(savedNote){setLastSaved(Date.now());loadNotes();}}catch(error){console.error('Save failed:',error);}finally{setIsSaving(false);}}},CONFIG.DEBOUNCE),[]);const loadNotes=useCallback(()=>{try{const currentUrl=location.href;const domain=utils.getDomain(currentUrl);setCurrentDomain(domain);if(viewMode==='url'){const loadedNotes=storage.load(currentUrl);setNotes(loadedNotes);}else if(viewMode==='domain'){const domainNotes=storage.getNotesByDomain(domain);const flatNotes=domainNotes.flatMap(noteData=>noteData.notes.map(note=>({...note,sourceUrl:noteData.url})));setNotes(utils.orderBy(flatNotes,['updated'],['desc']));}else if(viewMode==='all'){const allNotesData=storage.getAllNotes();const flatNotes=allNotesData.flatMap(noteData=>noteData.notes.map(note=>({...note,sourceUrl:noteData.url,domain:noteData.domain})));setNotes(utils.orderBy(flatNotes,['updated'],['desc']));}setAllNotes(storage.getAllNotes());}catch(error){console.error('Failed to load notes:',error);setNotes([]);}},viewMode);useEffect(()=>{loadNotes();},[loadNotes]);useEffect(()=>{if(currentId&&content!==null){debouncedSave(currentId,content);}},[content,currentId,debouncedSave]);useEffect(()=>{const handleKeyboard=(e)=>{if(CONFIG.SHORTCUT.modifiers.every(mod=>e[mod])&&e.code===CONFIG.SHORTCUT.key){e.preventDefault();setIsVisible(prev=>!prev);}if(e.key==='Escape'&&!isMinimized&&isVisible){const activeElement=document.activeElement;if(activeElement&&activeElement.closest('#note-container-bookmarklet')){e.preventDefault();setIsMinimized(true);}}};document.addEventListener('keydown',handleKeyboard);return()=>document.removeEventListener('keydown',handleKeyboard);},[isMinimized,isVisible]);const focusEditor=useCallback(()=>{setTimeout(()=>{if(textareaRef.current){textareaRef.current.focus();textareaRef.current.setSelectionRange(textareaRef.current.value.length,textareaRef.current.value.length);}},100);},[]);const expand=()=>{setIsMinimized(false);if(notes.length===0){createNewNote();}else{const latestNote=utils.maxBy(notes,'updated');editNote(latestNote.id);}};const createNewNote=()=>{if(viewMode!=='url'){setViewMode('url');setTimeout(()=>{const id=utils.generateId();setCurrentId(id);setContent('');setIsMinimized(false);focusEditor();},100);}else{const id=utils.generateId();setCurrentId(id);setContent('');setIsMinimized(false);focusEditor();}};const editNote=(id,sourceUrl=null)=>{const note=notes.find(n=>n.id===id);if(note){if(sourceUrl&&sourceUrl!==location.href){setCurrentId(id);setContent(note.content+'\n\n--- ã“ã®ãƒ¡ãƒ¢ã¯ '+sourceUrl+' ã§ä½œæˆã•ã‚Œã¾ã—ãŸ ---');setIsMinimized(false);}else{setCurrentId(id);setContent(note.content);setIsMinimized(false);focusEditor();}}};const deleteNote=async(id)=>{if(!confirm('ã“ã®ãƒãƒ¼ãƒˆã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ'))return;try{const success=storage.delete(location.href,id);if(success){if(currentId===id){setCurrentId(null);setContent('');}loadNotes();}}catch(error){console.error('Delete failed:',error);alert('ãƒãƒ¼ãƒˆã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ');}};const saveNote=()=>{if(currentId&&content.trim()){const savedNote=storage.save(location.href,currentId,content);if(savedNote){setLastSaved(Date.now());loadNotes();}}};const currentNote=useMemo(()=>notes.find(n=>n.id===currentId),[notes,currentId]);const sortedNotes=useMemo(()=>utils.orderBy(notes,['updated'],['desc']),[notes]);const statusText=useMemo(()=>{if(isSaving)return'Saving...';if(lastSaved)return`Saved at ${utils.formatDate(lastSaved)}`;if(content&&content.trim())return'Auto-saving...';return'Ready';},[isSaving,lastSaved,content]);const handleClose=()=>{setIsVisible(false);if(window.URLNoteTakerBookmarklet&&window.URLNoteTakerBookmarklet.cleanup){window.URLNoteTakerBookmarklet.cleanup();}};if(!isVisible)return null;return html`<div id="note-container-bookmarklet" class=${isMinimized?'minimized':''}><div class="header" onClick=${isMinimized?expand:null}><span class="title">${viewMode==='url'?`${notes.length} note${notes.length===1?'':'s'}`:viewMode==='domain'?`${notes.length} note${notes.length===1?'':'s'} (${currentDomain})`:`${notes.length} note${notes.length===1?'':'s'} (${allNotes.length} site${allNotes.length===1?'':'s'})`}</span>${!isMinimized&&html`<div class="controls"><button onClick=${()=>setIsMinimized(true)} title="Minimize (ESC)">âˆ’</button><button onClick=${handleClose} title="Close (Shift+N)">Ã—</button></div>`}</div>${!isMinimized&&html`<div class="content"><div class="sidebar"><div class="view-controls"><button class=${`view-btn ${viewMode==='url'?'active':''}`} onClick=${()=>setViewMode('url')} title="ã“ã®ãƒšãƒ¼ã‚¸ã®ãƒ¡ãƒ¢">URL</button><button class=${`view-btn ${viewMode==='domain'?'active':''}`} onClick=${()=>setViewMode('domain')} title="ã“ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ¡ãƒ¢">ãƒ‰ãƒ¡ã‚¤ãƒ³</button><button class=${`view-btn ${viewMode==='all'?'active':''}`} onClick=${()=>setViewMode('all')} title="å…¨ã¦ã®ãƒ¡ãƒ¢">å…¨ä½“</button></div><button class="new-btn" onClick=${createNewNote} title="Create new note">+ New</button><div class="list">${sortedNotes.map(note=>html`<div key=${note.id} class=${`note-item ${note.id===currentId?'active':''}`} onClick=${()=>editNote(note.id,note.sourceUrl)} title=${note.title}><div class="note-title">${note.title}</div><div class="note-preview">${utils.generatePreview(note.content)}</div>${(viewMode==='domain'||viewMode==='all')&&note.sourceUrl&&html`<div class="note-source">${viewMode==='all'?note.domain:utils.getDomain(note.sourceUrl)}</div>`}<div class="note-date">${utils.formatDate(note.updated)}</div></div>`)}</div></div><div class="main">${currentId?html`<div class="editor"><div class="editor-header"><div class="note-info"><div class="note-title">${currentNote?.title||'Untitled'}</div><div class="note-meta">Created: ${currentNote?utils.formatDate(currentNote.created):''}${currentNote?.updated!==currentNote?.created?` â€¢ Updated: ${utils.formatDate(currentNote.updated)}`:''}</div></div><div class="editor-controls"><button onClick=${saveNote} class="save-btn" title="Save now (Ctrl+S)">Save</button><button onClick=${()=>deleteNote(currentId)} class="delete-btn" title="Delete note">Delete</button></div></div><textarea ref=${textareaRef} value=${content} onInput=${(e)=>setContent(e.target.value)} onKeyDown=${(e)=>{if(e.ctrlKey&&e.key==='s'){e.preventDefault();saveNote();}}} placeholder="Write your note here..." class="note-textarea"/><div class="status"><span class=${isSaving?'saving':''}>${statusText}</span><span class="char-count">${content.length} chars</span></div></div>`:html`<div class="welcome"><h3>ğŸ“ Notes for this page</h3><p>Click <strong>"+ New"</strong> to create your first note, or select an existing note from the sidebar.</p><div class="shortcuts"><div><kbd>Shift</kbd> + <kbd>N</kbd> Toggle visibility</div><div><kbd>Ctrl</kbd> + <kbd>S</kbd> Save note</div><div><kbd>ESC</kbd> Minimize</div></div></div>`}</div></div>`}</div>`;};const addStyles=()=>{if(document.getElementById('note-styles-bookmarklet'))return;const style=document.createElement('style');style.id='note-styles-bookmarklet';style.textContent=`#note-container-bookmarklet{position:fixed;bottom:20px;right:20px;width:320px;background:white;border:1px solid #e0e0e0;border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,0.12);font:14px -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;z-index:2147483647;display:flex;flex-direction:column;max-height:500px;backdrop-filter:blur(10px);transition:all 0.2s ease}#note-container-bookmarklet:hover{box-shadow:0 12px 40px rgba(0,0,0,0.15)}#note-container-bookmarklet.minimized{width:auto;min-width:80px}#note-container-bookmarklet.minimized .content{display:none}#note-container-bookmarklet .header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);border-bottom:1px solid #e0e0e0;border-radius:12px 12px 0 0;cursor:pointer;user-select:none;transition:background 0.2s ease}#note-container-bookmarklet .header:hover{background:linear-gradient(135deg,#e9ecef 0%,#dee2e6 100%)}#note-container-bookmarklet.minimized .header{border-radius:12px;border-bottom:none}#note-container-bookmarklet .title{font-weight:600;color:#333;min-width:60px;text-align:center;font-size:13px}#note-container-bookmarklet .controls{display:flex;gap:4px}#note-container-bookmarklet .controls button{background:none;border:none;padding:6px 10px;cursor:pointer;border-radius:6px;color:#666;font-size:14px;transition:all 0.2s ease;line-height:1}#note-container-bookmarklet .controls button:hover{background:rgba(0,0,0,0.1);color:#333}#note-container-bookmarklet .content{display:flex;flex:1;min-height:0;height:420px}#note-container-bookmarklet .sidebar{width:130px;border-right:1px solid #e0e0e0;background:#fafbfc;display:flex;flex-direction:column}#note-container-bookmarklet .view-controls{display:flex;gap:2px;margin:8px 8px 4px 8px;background:#f1f3f4;border-radius:6px;padding:2px}#note-container-bookmarklet .view-btn{flex:1;background:none;border:none;padding:6px 4px;cursor:pointer;font-size:9px;font-weight:500;border-radius:4px;transition:all 0.2s ease;color:#666}#note-container-bookmarklet .view-btn:hover{background:rgba(0,0,0,0.1)}#note-container-bookmarklet .view-btn.active{background:white;color:#007bff;font-weight:600;box-shadow:0 1px 3px rgba(0,0,0,0.1)}#note-container-bookmarklet .new-btn{background:linear-gradient(135deg,#007bff 0%,#0056b3 100%);color:white;padding:10px 12px;margin:8px 12px 12px 12px;border:none;border-radius:8px;cursor:pointer;font-size:12px;font-weight:600;transition:all 0.2s ease;box-shadow:0 2px 8px rgba(0,123,255,0.3)}#note-container-bookmarklet .new-btn:hover{background:linear-gradient(135deg,#0056b3 0%,#003d82 100%);transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,123,255,0.4)}#note-container-bookmarklet .list{flex:1;overflow-y:auto;padding:4px 0}#note-container-bookmarklet .note-item{padding:10px 12px;margin:2px 8px;border-radius:8px;cursor:pointer;font-size:11px;border:1px solid transparent;transition:all 0.2s ease;position:relative}#note-container-bookmarklet .note-item:hover{background:#e9ecef;transform:translateX(2px)}#note-container-bookmarklet .note-item.active{background:linear-gradient(135deg,#007bff 0%,#0056b3 100%);color:white;box-shadow:0 2px 8px rgba(0,123,255,0.3)}#note-container-bookmarklet .note-title{font-weight:600;margin-bottom:3px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.2}#note-container-bookmarklet .note-preview{font-size:10px;opacity:0.8;margin-bottom:3px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.2}#note-container-bookmarklet .note-date{font-size:9px;opacity:0.7}#note-container-bookmarklet .note-source{font-size:8px;opacity:0.6;margin-bottom:2px;font-style:italic;color:#007bff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#note-container-bookmarklet .note-item.active .note-source{color:rgba(255,255,255,0.8)}#note-container-bookmarklet .main{flex:1;display:flex;flex-direction:column}#note-container-bookmarklet .welcome{display:flex;align-items:center;justify-content:center;flex:1;text-align:center;color:#666;padding:30px 20px;flex-direction:column}#note-container-bookmarklet .welcome h3{margin:0 0 12px 0;font-size:18px;color:#333}#note-container-bookmarklet .welcome p{margin:0 0 20px 0;font-size:13px;line-height:1.5}#note-container-bookmarklet .shortcuts{font-size:11px;color:#888}#note-container-bookmarklet .shortcuts div{margin:4px 0}#note-container-bookmarklet .shortcuts kbd{background:#f1f3f4;padding:2px 6px;border-radius:4px;font-family:monospace;font-size:10px;border:1px solid #ddd}#note-container-bookmarklet .editor{display:flex;flex-direction:column;flex:1}#note-container-bookmarklet .editor-header{display:flex;justify-content:space-between;align-items:flex-start;padding:16px;border-bottom:1px solid #e0e0e0;gap:12px}#note-container-bookmarklet .note-info{flex:1;min-width:0}#note-container-bookmarklet .note-info .note-title{font-weight:600;font-size:14px;color:#333;margin:0 0 4px 0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#note-container-bookmarklet .note-meta{font-size:11px;color:#666;line-height:1.3}#note-container-bookmarklet .editor-controls{display:flex;gap:6px;flex-shrink:0}#note-container-bookmarklet .editor-controls button{padding:6px 12px;border:none;border-radius:6px;cursor:pointer;font-size:12px;font-weight:500;transition:all 0.2s ease}#note-container-bookmarklet .save-btn{background:linear-gradient(135deg,#28a745 0%,#1e7e34 100%);color:white;box-shadow:0 2px 6px rgba(40,167,69,0.3)}#note-container-bookmarklet .save-btn:hover{background:linear-gradient(135deg,#1e7e34 0%,#155724 100%);transform:translateY(-1px);box-shadow:0 4px 10px rgba(40,167,69,0.4)}#note-container-bookmarklet .delete-btn{background:linear-gradient(135deg,#dc3545 0%,#c82333 100%);color:white;box-shadow:0 2px 6px rgba(220,53,69,0.3)}#note-container-bookmarklet .delete-btn:hover{background:linear-gradient(135deg,#c82333 0%,#a71e2a 100%);transform:translateY(-1px);box-shadow:0 4px 10px rgba(220,53,69,0.4)}#note-container-bookmarklet .note-textarea{flex:1;border:none;padding:16px;font:14px/1.5 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,monospace;resize:none;outline:none;min-height:100px;background:#fdfdfd}#note-container-bookmarklet .note-textarea:focus{background:white}#note-container-bookmarklet .status{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;font-size:11px;color:#666;border-top:1px solid #e0e0e0;background:#fafbfc}#note-container-bookmarklet .status .saving{color:#007bff}#note-container-bookmarklet .char-count{opacity:0.7}@media (prefers-color-scheme:dark){#note-container-bookmarklet{background:rgba(45,55,72,0.95);border-color:#4a5568;color:#e2e8f0;backdrop-filter:blur(20px)}#note-container-bookmarklet .header{background:linear-gradient(135deg,#2d3748 0%,#1a202c 100%);border-color:#4a5568}#note-container-bookmarklet .header:hover{background:linear-gradient(135deg,#1a202c 0%,#171923 100%)}#note-container-bookmarklet .title{color:#e2e8f0}#note-container-bookmarklet .sidebar{background:rgba(45,55,72,0.8);border-color:#4a5568}#note-container-bookmarklet .note-item:hover{background:#4a5568}#note-container-bookmarklet .note-textarea{background:rgba(74,85,104,0.3);color:#e2e8f0}#note-container-bookmarklet .note-textarea:focus{background:rgba(74,85,104,0.5)}#note-container-bookmarklet .editor-header,#note-container-bookmarklet .status{border-color:#4a5568;background:rgba(45,55,72,0.8)}#note-container-bookmarklet .note-info .note-title{color:#e2e8f0}#note-container-bookmarklet .welcome h3{color:#e2e8f0}#note-container-bookmarklet .shortcuts kbd{background:#4a5568;border-color:#718096;color:#e2e8f0}}#note-container-bookmarklet .list::-webkit-scrollbar{width:4px}#note-container-bookmarklet .list::-webkit-scrollbar-track{background:transparent}#note-container-bookmarklet .list::-webkit-scrollbar-thumb{background:#ccc;border-radius:2px}#note-container-bookmarklet .list::-webkit-scrollbar-thumb:hover{background:#999}`;document.head.appendChild(style);};addStyles();const container=document.createElement('div');container.id='url-note-taker-bookmarklet-root';document.body.appendChild(container);render(html`<${NoteApp}/>`,container);window.URLNoteTakerBookmarklet={toggle:()=>{const container=document.getElementById('note-container-bookmarklet');if(container){const display=container.style.display;container.style.display=display==='none'?'flex':'none';}},cleanup:()=>{const root=document.getElementById('url-note-taker-bookmarklet-root');const style=document.getElementById('note-styles-bookmarklet');if(root)root.remove();if(style)style.remove();delete window.URLNoteTakerBookmarklet;}};};loadDependencies().then(()=>{initApp();}).catch((error)=>{console.error('Failed to load dependencies:',error);alert('URL Note Taker: ä¾å­˜é–¢ä¿‚ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');});})();
   ```

2. ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒãƒ¼ã‚’å³ã‚¯ãƒªãƒƒã‚¯ â†’ ã€Œãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚’è¿½åŠ ã€
3. åå‰: `URL Note Taker`
4. URL: ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘
5. ä¿å­˜

### 2. ä½¿ç”¨æ–¹æ³•

1. ãƒ¡ãƒ¢ã‚’å–ã‚ŠãŸã„ãƒšãƒ¼ã‚¸ã§ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ã‚¯ãƒªãƒƒã‚¯
2. åˆå›èµ·å‹•æ™‚ã¯ä¾å­˜é–¢ä¿‚ã®èª­ã¿è¾¼ã¿ã«æ•°ç§’ã‹ã‹ã‚Šã¾ã™
3. ç”»é¢å³ä¸‹ã«ãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªãŒè¡¨ç¤ºã•ã‚Œã¾ã™

### 3. æ“ä½œæ–¹æ³•

#### åŸºæœ¬æ“ä½œ
- **+ New**: æ–°ã—ã„ãƒ¡ãƒ¢ã‚’ä½œæˆ
- **æœ€å°åŒ–çŠ¶æ…‹ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¯ãƒªãƒƒã‚¯**: ã‚¢ãƒ—ãƒªã‚’å±•é–‹
- **Ã—ãƒœã‚¿ãƒ³**: ã‚¢ãƒ—ãƒªã‚’éè¡¨ç¤º
- **âˆ’ãƒœã‚¿ãƒ³**: ã‚¢ãƒ—ãƒªã‚’æœ€å°åŒ–

#### ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
- `Shift + N`: ã‚¢ãƒ—ãƒªã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆ
- `Ctrl + S`: ãƒ¡ãƒ¢ã‚’æ‰‹å‹•ä¿å­˜
- `ESC`: ã‚¢ãƒ—ãƒªã‚’æœ€å°åŒ–ï¼ˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ï¼‰

#### è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰
- **URL**: ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã®ãƒ¡ãƒ¢ã®ã¿è¡¨ç¤º
- **ãƒ‰ãƒ¡ã‚¤ãƒ³**: åŒã˜ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ¡ãƒ¢ã‚’è¡¨ç¤º
- **å…¨ä½“**: å…¨ã‚µã‚¤ãƒˆã®ãƒ¡ãƒ¢ã‚’è¡¨ç¤º

## ç‰¹å¾´

- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ä¸è¦**: ã©ã‚“ãªãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚å‹•ä½œ
- **è‡ªå‹•ä¿å­˜**: å…¥åŠ›å†…å®¹ã¯è‡ªå‹•çš„ã«ä¿å­˜
- **3ã¤ã®è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰**: URLã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã€å…¨ä½“ã§ãƒ¡ãƒ¢ã‚’æ•´ç†
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**: ãƒ¡ãƒ¢ã®å¤‰æ›´ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§åæ˜ 
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–UI**: ãƒ¢ãƒ€ãƒ³ãªPreactãƒ™ãƒ¼ã‚¹ã®UI
- **ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ**: ã‚·ã‚¹ãƒ†ãƒ ã®è¨­å®šã«å¿œã˜ã¦è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ
- **localStorageä¿å­˜**: ãƒ‡ãƒ¼ã‚¿ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®localStorageã«ä¿å­˜

## æ³¨æ„äº‹é …

- åˆå›èµ·å‹•æ™‚ã¯ä¾å­˜é–¢ä¿‚ï¼ˆPreactã€Lodashã€Day.jsï¼‰ã‚’CDNã‹ã‚‰èª­ã¿è¾¼ã‚€ãŸã‚ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒå¿…è¦ã§ã™
- ãƒ‡ãƒ¼ã‚¿ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®localStorageã«ä¿å­˜ã•ã‚Œã‚‹ãŸã‚ã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã™ã‚‹ã¨æ¶ˆå¤±ã—ã¾ã™
- ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã«ãƒ‡ãƒ¼ã‚¿ãŒå‰Šé™¤ã•ã‚Œã¾ã™

## ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã§ãã¾ã™ï¼š

```javascript
// å…¨ãƒ¡ãƒ¢ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
const exportData = [];
for (let i = 0; i < localStorage.length; i++) {
  const key = localStorage.key(i);
  if (key && key.startsWith('notes_')) {
    exportData.push({
      key: key,
      data: localStorage.getItem(key)
    });
  }
}
console.log(JSON.stringify(exportData, null, 2));
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ä¾å­˜é–¢ä¿‚ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã™ã‚‹å ´åˆ
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„
- ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ã‹ã‚‰ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„

### ãƒ¡ãƒ¢ãŒä¿å­˜ã•ã‚Œãªã„å ´åˆ
- ãƒ–ãƒ©ã‚¦ã‚¶ã®localStorageãŒç„¡åŠ¹ã«ãªã£ã¦ã„ãªã„ã‹ç¢ºèªã—ã¦ãã ã•ã„
- ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰ã§ã¯ãªã„ã‹ç¢ºèªã—ã¦ãã ã•ã„

### ã‚¢ãƒ—ãƒªãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆ
- ãƒšãƒ¼ã‚¸ã®Content Security PolicyãŒã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œã‚’é˜»æ­¢ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
- åˆ¥ã®ãƒšãƒ¼ã‚¸ã§è©¦ã—ã¦ã¿ã¦ãã ã•ã„

## æŠ€è¡“ä»•æ§˜

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Preact 10.19.3 + Hooks
- **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**: HTM 3.1.1
- **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£**: Lodash 4.17.21
- **æ—¥ä»˜å‡¦ç†**: Day.js 1.11.7
- **ãƒ‡ãƒ¼ã‚¿ä¿å­˜**: Browser localStorage API
- **å¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶**: Chrome 80+, Firefox 75+, Safari 13+, Edge 80+

---

å…ƒã®URL Note Takerãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨åŒã˜æ©Ÿèƒ½ã‚’ã€ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã¨ã—ã¦ç°¡å˜ã«åˆ©ç”¨ã§ãã¾ã™ã€‚